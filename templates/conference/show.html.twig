{% extends 'base.html.twig' %}

{% block title %}
	{{ conference.nom }}
{% endblock %}

{% block body %}
	<a style="float: right;" href="{{path('app_conference')}}">Retourner à la liste des conférences</a>
	<h1 class="m-5">{{ conference.nom }}</h1>
	<h2 class="m-3">Caractéristiques</h2>

	<ul class='list-group m-3'>
		<li class='list-group-item list-group-item-action'>Ville :
			{{ conference.city }}</li>
		<li class='list-group-item list-group-item-action'>Année :
			{{ conference.year }}</li>
		<li class='list-group-item list-group-item-action'>Internationale :
			{% if conference.isInternational %}
				Oui
			{% else %}
				Non
			{% endif %}
		</li>
	</ul>

	{# <img src="{{ dir ~ conference.photoFileName }}"> #}
	<button class='btn btn-primary' style='float: right;'><a class="text-white text-decoration-none" href="{{ path('conference_newcomment' , {id: conference.id}) }}">Laisser un commentaire</a></button>
	<h2 class="m-3">Commentaires</h2>
	<ul class='list-group m-3'>
		{% for comment in comments %}
			<li class='list-group-item list-group-item-action'>
				<h3>Auteur
					{{ comment.author }}
					/ Email
					{{ comment.email }}</h3>
				<span>écris le
					{{ comment.createdAt|date('d/m/Y') }}</span>
				<p>{{ comment.text|raw }}</p>
			</li>
		{% endfor %}
	</ul>
    {% if previous >= 0 %}
        <a href="{{ path('ficheConference', {id: conference.id, offset: previous}) }}" class="btn btn-sm btn-primary m-3"> << </a>
    {% endif %}


	{% if pageActuelle <= 3 %}
	{%if pageActuelle > 1 %}
		{% for i in 2..pageActuelle %}
		 <a href="{{ path('ficheConference', { id: conference.id, offset: previous - (offset  * (pageActuelle - i))}) }}" class="btn btn-sm btn-primary m-3">{{ i - 1 }}</a>
		{% endfor %}
		{% endif %}
		{% else %}
		{% for i in pageActuelle-2..pageActuelle %}
		 <a href="{{ path('ficheConference', { id: conference.id, offset: previous - (offset  * (pageActuelle - i))}) }}" class="btn btn-sm btn-primary m-3">{{ i - 1 }}</a>
		{% endfor %}
		{% endif %}


	<span class="btn btn-sm btn-primary m-3 bg-warning"> {{ pageActuelle }}</span>


	{% if difPages < 3 %}

		{% if  difPages > 0 %}
			{% for i in 1..difPages %}
		 		<a href="{{ path('ficheConference', { id: conference.id, offset: next + (offset * (i - 1))}) }}" class="btn btn-sm btn-primary m-3">{{ pageActuelle + i }}</a>
			{% endfor %}
		{% endif %}
	{% else %}

		{% for i in 1..3 %}
		 	<a href="{{ path('ficheConference', { id: conference.id, offset: next + (offset * (i - 1))}) }}" class="btn btn-sm btn-primary m-3">{{ pageActuelle + i }}</a>
		{% endfor %}
	{% endif %}

    {% if next < comments|length %}
        <a href="{{ path('ficheConference', { id: conference.id, offset: next }) }}" class="btn btn-sm btn-primary m-3"> >> </a>
    {% endif %}

    <br>
	Il y a {{ comments|length~' commentaire'~( comments|length > 1 ? 's' : '') }}
	<br>
    Il y a {{ nbrePages }} pages
	<br>
    Nous sommes sur la page : {{ (next / offset)|round}}
	<br>
		Nbre de page restante : {{ difPages }} 
    
{% endblock %}
